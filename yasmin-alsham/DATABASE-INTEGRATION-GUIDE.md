# ุฏููู ุฑุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช - ูุงุณููู ุงูุดุงู
# Database Integration Guide - Yasmin Alsham

## โ ูุง ุชู ุฅูุฌุงุฒู

ุชู ุฑุจุท ุงููููุน ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ! ุงูุขู ุฌููุน ุงูุจูุงูุงุช ุณุชูุญูุธ ูู ูุงุนุฏุฉ ุจูุงูุงุช Supabase ุจุฏูุงู ูู localStorage.

## ๐ง ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ

### 1. **ูุชุฌุฑ ุงูุจูุงูุงุช (dataStore)**
- โ ุชู ุชุญุฏูุซ ุฌููุน ุงูุฏูุงู ูุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฅุถุงูุฉ ุฏูุงู ุชุญููู ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุชุญููู ุงูุจูุงูุงุช ุจูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููุงุฌูุฉ ุงููุญููุฉ

### 2. **ูุชุฌุฑ ุงูุชุณูู (shopStore)**
- โ ุชู ุชุญุฏูุซ ุงูููุถูุฉ ูุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุชู ุชุญุฏูุซ ุณูุฉ ุงูุชุณูู ูุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฅุถุงูุฉ ุฏูุงู ุชุญููู ุงูุจูุงูุงุช

### 3. **ุฎุฏูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช**
- โ ุชู ุฅูุดุงุก ุฌููุน ุงูุฎุฏูุงุช ุงููุทููุจุฉ
- โ ุฏุนู CRUD ูุงูู ูุฌููุน ุงูุฌุฏุงูู
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

## โ๏ธ ูุง ูุญุชุงุฌ ุฅููุงูู

### 1. **ุฅุนุฏุงุฏ ุงููุตุงุฏูุฉ (Authentication)**
ุงููุดููุฉ ุงูุญุงููุฉ: ุฌููุน ุงูุนูููุงุช ุชุณุชุฎุฏู `temp-user-id` ุจุฏูุงู ูู ูุนุฑู ุงููุณุชุฎุฏู ุงูุญูููู.

**ุงูุญู:**
```typescript
// ูู shopStore.ts ู dataStore.ts
// ุงุณุชุจุฏู ูุฐุง:
const userId = 'temp-user-id'

// ุจูุฐุง:
const { data: { user } } = await supabase.auth.getUser()
const userId = user?.id
```

### 2. **ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ**
ุชุฃูุฏ ูู ุฅุถุงูุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู Vercel:
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### 3. **ุชูุนูู ุงููุตุงุฏูุฉ ูู Supabase**
1. ุงุฐูุจ ุฅูู **Authentication** > **Settings**
2. ูุนูู **Enable email confirmations**
3. ูุนูู **Email** ูู **Providers**

## ๐ ููููุฉ ุงุฎุชุจุงุฑ ุงูุฑุจุท

### 1. **ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ููุนุฏ**
```typescript
import { useDataStore } from '@/store/dataStore'

const { addAppointment } = useDataStore()

// ุฅุถุงูุฉ ููุนุฏ ุฌุฏูุฏ
await addAppointment({
  clientName: 'ุฃุญูุฏ ูุญูุฏ',
  clientPhone: '+966501234567',
  appointmentDate: '2024-01-15',
  appointmentTime: '16:00',
  notes: 'ููุนุฏ ุชุฌุฑูุจู'
})
```

### 2. **ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุทูุจ**
```typescript
import { useDataStore } from '@/store/dataStore'

const { addOrder } = useDataStore()

// ุฅุถุงูุฉ ุทูุจ ุฌุฏูุฏ
await addOrder({
  clientName: 'ูุงุทูุฉ ุนูู',
  clientPhone: '+966501234567',
  description: 'ูุณุชุงู ุฒูุงู ููุงุณููู',
  fabric: 'ุดูููู ุญุฑูุฑู',
  measurements: {
    chest: 90,
    waist: 70,
    hips: 95
  },
  price: 1500,
  dueDate: '2024-02-01'
})
```

### 3. **ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ููุชุฌ ููููุถูุฉ**
```typescript
import { useShopStore } from '@/store/shopStore'

const { addToFavorites } = useShopStore()

// ุฅุถุงูุฉ ููุชุฌ ููููุถูุฉ
await addToFavorites({
  id: 'prod-1',
  name: 'ูุณุชุงู ุฃููู',
  price: 800,
  image: '/dress-1.jpg'
})
```

## ๐ ูุฑุงูุจุฉ ุงูุจูุงูุงุช

### 1. **ูู ููุญุฉ ุชุญูู Supabase**
- ุงุฐูุจ ุฅูู **Table Editor**
- ุชุญูู ูู ุงูุฌุฏุงูู: `appointments`, `orders`, `favorites`, `cart_items`
- ุณุชุฌุฏ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ููุงู

### 2. **ูู Console ุงููุชุตูุญ**
- ุงูุชุญ **Developer Tools** > **Console**
- ุณุชุฌุฏ ุฑุณุงุฆู ุชุฃููุฏ ุนูุฏ ุฅุถุงูุฉ ุงูุจูุงูุงุช

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ:

#### 1. **ุฎุทุฃ ูู ุงูุงุชุตุงู**
```
Error: Invalid API key
```
**ุงูุญู:** ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ

#### 2. **ุฎุทุฃ ูู RLS**
```
Error: new row violates row-level security policy
```
**ุงูุญู:** ุชุญูู ูู ุณูุงุณุงุช RLS ูู Supabase

#### 3. **ุฎุทุฃ ูู ุงููุตุงุฏูุฉ**
```
Error: JWT expired
```
**ุงูุญู:** ุฃุนุฏ ุชุณุฌูู ุงูุฏุฎูู

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. **ุงูุฃุฏุงุก**
- ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฑุงู
- ูุชู ุชุญุฏูุซ ุงููุงุฌูุฉ ุงููุญููุฉ ุฃูุถุงู ููุณุฑุนุฉ
- ูููู ุฅุถุงูุฉ cache ูุชุญุณูู ุงูุฃุฏุงุก

### 2. **ุงูุฃูุงู**
- ุฌููุน ุงูุนูููุงุช ูุญููุฉ ุจู RLS
- ุงูุจูุงูุงุช ูุญููุฉ ุญุณุจ ุงููุณุชุฎุฏู
- ูููู ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุชุญูู

### 3. **ุงููุณุฎ ุงูุงุญุชูุงุทู**
- Supabase ูููุฑ ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู
- ูููู ุชุตุฏูุฑ ุงูุจูุงูุงุช ูุฏููุงู
- ูููู ุฅุนุฏุงุฏ webhooks ููุฅุดุนุงุฑุงุช

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. **ุฅููุงู ุฅุนุฏุงุฏ ุงููุตุงุฏูุฉ**
- ุฑุจุท ุงููุณุชุฎุฏููู ุงูุญูููููู
- ุฅุถุงูุฉ ุตูุญุงุช ุชุณุฌูู ุงูุฏุฎูู/ุงูุชุณุฌูู
- ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช

### 2. **ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูููุฒุงุช**
- ุฅุดุนุงุฑุงุช ููุฑูุฉ
- ุชูุงุฑูุฑ ูุฅุญุตุงุฆูุงุช
- ูุธุงู ุฏูุน
- ุฅุฏุงุฑุฉ ุงููุฎุฒูู

### 3. **ุชุญุณูู ุงูุฃุฏุงุก**
- ุฅุถุงูุฉ cache
- ุชุญุณูู ุงูุงุณุชุนูุงูุงุช
- ุฅุถุงูุฉ indexes ุฅุถุงููุฉ

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู **Console** ูู ุงููุชุตูุญ
2. ุฑุงุฌุน **Logs** ูู Supabase
3. ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช RLS
4. ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงูุขู ูููุนู ูุนูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ! ุฌููุน ุงูุจูุงูุงุช ุชูุญูุธ ูู Supabase ููููู ุงููุตูู ุฅูููุง ูู ุฃู ููุงู. ุงููููุน ุฃุตุจุญ ุฌุงูุฒุงู ููุฅูุชุงุฌ ูุน ูุงุนุฏุฉ ุจูุงูุงุช ูููุฉ ูุขููุฉ. 